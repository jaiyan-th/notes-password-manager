{% extends "base.html" %}

{% block title %}{{ password.service_name }} - SecureDesk{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>{{ password.service_name }}</h2>
        <div style="display: flex; gap: 10px;">
            <a href="{{ url_for('passwords.edit_password', password_id=password.id) }}" style="padding: 10px 20px; background-color: #FF9900; color: white; border-radius: 4px; text-decoration: none;">Edit</a>
            <a href="{{ url_for('passwords.delete_password', password_id=password.id) }}" style="padding: 10px 20px; background-color: #f3f3f3; color: #d32f2f; border-radius: 4px; text-decoration: none;" onclick="return confirm('Are you sure you want to delete this password entry?');">Delete</a>
        </div>
    </div>

    <div class="card">
        <div style="margin-bottom: 20px;">
            <label style="font-weight: 500; color: #333; display: block; margin-bottom: 5px;">Service</label>
            <p style="font-size: 18px;">{{ password.service_name }}</p>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="font-weight: 500; color: #333; display: block; margin-bottom: 5px;">Username</label>
            <div style="display: flex; gap: 10px; align-items: center;">
                <code style="background-color: #f5f5f5; padding: 10px; border-radius: 4px; flex: 1;">{{ password.username }}</code>
                <button style="padding: 8px 16px;" onclick="navigator.clipboard.writeText('{{ password.username }}');">Copy</button>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="font-weight: 500; color: #333; display: block; margin-bottom: 5px;">Password</label>
            <div style="display: flex; gap: 10px; align-items: center;">
                <input type="password" id="passwordField" value="{{ decrypted_password }}" readonly style="background-color: #f5f5f5; padding: 10px; border-radius: 4px; flex: 1; border: none;">
                <button type="button" style="padding: 8px 16px;" onclick="togglePasswordVisibility();">Show</button>
                <button type="button" style="padding: 8px 16px;" onclick="navigator.clipboard.writeText(document.getElementById('passwordField').value);">Copy</button>
            </div>
        </div>

        <small style="color: #999;">{{ password.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
    </div>

    <div style="margin-top: 20px;">
        <a href="{{ url_for('passwords.list_passwords') }}" style="padding: 10px 20px; background-color: #e0e0e0; color: #333; border-radius: 4px; text-decoration: none;">‚Üê Back to Passwords</a>
    </div>
</div>

<script>
function togglePasswordVisibility() {
    const field = document.getElementById('passwordField');
    if (field.type === 'password') {
        field.type = 'text';
        event.target.textContent = 'Hide';
    } else {
        field.type = 'password';
        event.target.textContent = 'Show';
    }
}
</script>
{% endblock %}
